<div class="chat-demo-container">
  <div class="chat-widget">
    <!-- Chat Header -->
    <div class="chat-header">
      <div class="header-left">
        <span class="chat-icon">ğŸ”µ</span>
        <div class="header-text">
          <h3>Tixxets Support</h3>
          <span class="status-indicator">ğŸ¤– AI Assistant Online</span>
        </div>
      </div>
      <button class="close-btn">Ã—</button>
    </div>

    <!-- Messages Area -->
    <div class="messages-container">
      <div class="messages-list">
        <div
          *ngFor="let message of messages"
          class="message"
          [class.customer]="message.sender === 'customer'"
          [class.ai]="message.sender === 'ai'"
          [class.agent]="message.sender === 'agent'">

          <!-- Message Bubble -->
          <div class="message-bubble" [class]="getConfidenceClass(message.confidence)">
            <!-- AI Badge -->
            <div class="message-sender" *ngIf="message.sender === 'ai'">
              <span class="ai-badge">ğŸ¤– AI Assistant</span>
              <span class="confidence-indicator" *ngIf="message.confidence && message.confidence > 0">
                {{ message.confidence }}%
              </span>
            </div>

            <!-- Message Text -->
            <div class="message-text">{{ message.text }}</div>

            <!-- Timestamp -->
            <div class="message-timestamp">
              {{ message.timestamp | date:'shortTime' }}
            </div>

            <!-- Escalation Indicator -->
            <div class="escalation-notice" *ngIf="message.isEscalated">
              âš ï¸ Escalated to human agent
            </div>
          </div>
        </div>

        <!-- Typing Indicator -->
        <div class="typing-indicator" *ngIf="isAIThinking">
          <div class="typing-bubble">
            <span class="ai-badge">ğŸ¤– AI Assistant</span>
            <div class="typing-dots">
              <span></span><span></span><span></span>
            </div>
          </div>
        </div>
      </div>

      <!-- Status Badge -->
      <div class="conversation-status" *ngIf="getStatusBadge()">
        {{ getStatusBadge() }}
      </div>
    </div>

    <!-- Input Area -->
    <div class="input-area">
      <textarea
        [(ngModel)]="userInput"
        (keypress)="onKeyPress($event)"
        placeholder="Type your message..."
        rows="2"
        [disabled]="isAIThinking"
        class="message-input">
      </textarea>
      <button
        (click)="sendMessage()"
        [disabled]="!userInput.trim() || isAIThinking"
        class="send-btn">
        {{ isAIThinking ? '...' : 'Send' }}
      </button>
    </div>

    <!-- Footer -->
    <div class="chat-footer">
      <span class="footer-text">Powered by AI Â· Response time: ~2 seconds</span>
    </div>
  </div>
</div>
