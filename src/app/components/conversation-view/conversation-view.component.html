<div class="conversation-view">
  <div *ngIf="!conversation" class="no-conversation">
    <div class="empty-state">
      <span class="icon">ğŸ’¬</span>
      <h3>Select a conversation</h3>
      <p>Choose a conversation from the inbox to start chatting</p>
    </div>
  </div>

  <div *ngIf="conversation" class="conversation-content">
    <!-- Conversation Header -->
    <div class="conversation-header">
      <div class="header-info">
        <h2>{{ conversation.customer_name || 'Anonymous' }}</h2>
        <p>{{ conversation.customer_email || conversation.customer_phone || '' }}</p>
      </div>
      <div class="header-actions">
        <select
          [value]="conversation.status"
          (change)="updateStatus($any($event.target).value)"
          class="status-dropdown"
        >
          <option value="open">ğŸŸ¢ Open</option>
          <option value="pending">ğŸŸ¡ Pending</option>
          <option value="closed">âš« Resolved</option>
        </select>
      </div>
    </div>

    <!-- Messages Container -->
    <div class="messages-container">
      <div *ngFor="let message of messages" 
           class="message-wrapper"
           [ngClass]="'message-' + message.sender">
        
        <div class="message">
          <div class="message-avatar" *ngIf="message.sender !== 'system'">
            <span *ngIf="message.sender === 'customer'">ğŸ‘¤</span>
            <span *ngIf="message.sender === 'agent'">ğŸ‘©â€ğŸ’¼</span>
          </div>
          
          <div class="message-content">
            <div class="message-bubble" [ngClass]="'bubble-' + message.sender">
              <p>{{ message.message }}</p>
            </div>
            <span class="message-time">{{ message.created_at | timeAgo }}</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Message Input -->
    <div class="message-input">
      <div class="input-container">
        <textarea 
          [(ngModel)]="agentMessage"
          placeholder="Type your message..."
          rows="3">
        </textarea>
        <button class="btn-attach" title="Attach file">ğŸ“</button>
      </div>
      <div class="input-actions">
        <button class="btn-send" (click)="sendMessage()">
          Send
        </button>
      </div>
    </div>
  </div>
</div>
